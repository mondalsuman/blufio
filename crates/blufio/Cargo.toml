[package]
name = "blufio"
version.workspace = true
edition.workspace = true
license.workspace = true
repository.workspace = true
authors.workspace = true
publish = false
description = "An always-on personal AI agent"

[[bin]]
name = "blufio"
path = "src/main.rs"

[features]
default = ["telegram", "anthropic", "sqlite", "onnx", "prometheus", "keypair", "gateway"]
telegram = ["dep:blufio-telegram"]
anthropic = ["dep:blufio-anthropic"]
sqlite = ["dep:blufio-storage"]
onnx = []
prometheus = ["dep:blufio-prometheus"]
keypair = ["dep:blufio-auth-keypair"]
gateway = ["dep:blufio-gateway"]

[dependencies]
blufio-core = { path = "../blufio-core" }
blufio-config = { path = "../blufio-config" }
blufio-vault = { path = "../blufio-vault" }
blufio-agent = { path = "../blufio-agent" }
blufio-context = { path = "../blufio-context" }
blufio-cost = { path = "../blufio-cost" }
blufio-router = { path = "../blufio-router" }
blufio-skill = { path = "../blufio-skill" }
blufio-plugin = { path = "../blufio-plugin" }

# Optional adapter crates (controlled by feature flags).
blufio-storage = { path = "../blufio-storage", optional = true }
blufio-telegram = { path = "../blufio-telegram", optional = true }
blufio-anthropic = { path = "../blufio-anthropic", optional = true }
blufio-memory = { path = "../blufio-memory" }
blufio-gateway = { path = "../blufio-gateway", optional = true }
blufio-prometheus = { path = "../blufio-prometheus", optional = true }
blufio-auth-keypair = { path = "../blufio-auth-keypair", optional = true }

tokio-rusqlite.workspace = true
clap.workspace = true
rpassword.workspace = true
secrecy.workspace = true
tracing.workspace = true
tracing-subscriber.workspace = true
tokio = { workspace = true, features = ["full"] }
tokio-util.workspace = true
rustyline.workspace = true
colored.workspace = true
futures.workspace = true
uuid.workspace = true
chrono.workspace = true
serde_json = "1"
serde = { version = "1", features = ["derive"] }
reqwest = { workspace = true }
rusqlite = { workspace = true, features = ["backup"] }

[target.'cfg(not(target_env = "msvc"))'.dependencies]
tikv-jemallocator = { workspace = true }
tikv-jemalloc-ctl = { workspace = true }

[dev-dependencies]
blufio-test-utils = { path = "../blufio-test-utils" }
blufio-auth-keypair = { path = "../blufio-auth-keypair" }
blufio-storage = { path = "../blufio-storage" }
serde_json = "1"
tempfile = "3"
toml.workspace = true
tokio = { workspace = true, features = ["test-util", "macros", "rt-multi-thread"] }
